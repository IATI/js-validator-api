openapi: '3.0.0'
info:
    version: '2.2.0'
    title: 'js-validator-api'
    description: JavaScript IATI Validator API

servers:
    - url: 'http://localhost:7071'
      description: Local Function
    - url: 'https://func-iativalidator-dev.azurewebsites.net'
      description: Dev environment Function (requires auth)
    - url: 'https://func-iativalidator-prod.azurewebsites.net'
      description: Production environment Function (requires auth)

paths:
    /api/pub/version:
        get:
            summary: Returns application version.
            responses:
                200:
                    description: Version of the application in semver format
                    content:
                        text/plain:
                            schema:
                                type: string
                                example: 1.0.7
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                500:
                    description: Unexpected server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
    /api/pub:
        get:
            summary: Returns application information.
            description: Public route to return application information. Mainly to test that the API is functioning.
            parameters:
                - name: name
                  description: A name of your choice
                  in: query
                  required: false
                  schema:
                      type: string
            responses:
                200:
                    description: Metadata about the application
                    content:
                        text/plain:
                            schema:
                                $ref: '#/components/schemas/AppInfo'
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                500:
                    description: Unexpected error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
    /api/pvt:
        get:
            summary: Returns application information.
            description: Private route to return application information. Mainly to test that the API is functioning.
            parameters:
                - name: name
                  description: A name of your choice
                  in: query
                  required: false
                  schema:
                      type: string
            responses:
                200:
                    description: Metadata about the application
                    content:
                        text/plain:
                            schema:
                                $ref: '#/components/schemas/AppInfo'
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                500:
                    description: Unexpected error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
    /api/pub/validate:
        post:
            summary: Returns a validation report for provided IATI XML.
            description: "This route allows the user to POST an IATI document to the Validator in the body of the request, and receive a JSON validation report in the response.\n\n[GitHub Repository](https://github.com/IATI/js-validator-api)  \n\n[Error ID Information](https://github.com/IATI/validator-rule-tracker)\n"
            parameters:
                - in: query
                  name: details
                  description: Show all context information for advanced use and debugging
                  required: false
                  schema:
                      type: boolean
                      default: false
                - in: query
                  name: group
                  description: If set to false, returns errors ungrouped in a "flat" structure, default is to group by Activity/Organisation identifier and Category
                  required: false
                  schema:
                      type: boolean
                      default: true
                - in: query
                  name: meta
                  description: Returns an additional `"activities"` key for activities files and `"organisations"` key for organisation files which contains an Array of metadata about the activities or organisations present in the file.
                  required: false
                  schema:
                      type: boolean
                      default: false
            requestBody:
                $ref: '#/components/requestBodies/IATIXML'
            responses:
                200:
                    description: No Critical errors were detected with the IATI document and validation was successful. There may be validation errors of severity "error" or "warning" with the document.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ValidationReportAdHocValidate'
                400:
                    description: Bad Request
                    content:
                        application/json:
                            schema:
                                oneOf:
                                    - $ref: '#/components/schemas/Error'
                                    - $ref: '#/components/schemas/ValidationReportAdHocValidate'
                            examples:
                                wrongType:
                                    value:
                                        error: 'Body must be an application/xml string'
                                noBodyError:
                                    value:
                                        error: 'No Body'
                413:
                    description: Payload Too Large
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                            example:
                                value:
                                    error: 'Max Filesize of <int> MiB exceeded. File supplied is <int> MiB'
                422:
                    description: "Content of the body can be interpreted by the application but doesn't make sense for one of the following reasons.\n- Not recognisable as IATI\n- Critical (Schema) Errors\n- Not a supported version of IATI"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ValidationReportAdHocValidate'
                            example:
                                valid: false
                                fileType: string
                                iatiVersion: string
                                rulesetCommitSha: string
                                codelistCommitSha: string
                                orgIdPrefixFileName: string
                                apiVersion: string
                                summary:
                                    critical: 0
                                    error: 0
                                    warning: 0
                                errors:
                                    - errors:
                                          - errors:
                                                - id: string
                                                  severity: string
                                                  message: string
                                                  codelist: string
                                                  context:
                                                      - text: string
                                            category: string
                                      identifier: string
                                      title: string
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                500:
                    description: Unexpected server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
    /api/pvt/schema-validate-file:
        post:
            summary: Checks file against IATI XML Schema
            description: |
                Returns response that indicates if file validates against the IATI XML Schema.
                Used by the Unified Platform `validate` container to perform a Schema check first, before doing a full validation.
            requestBody:
                $ref: '#/components/requestBodies/IATIXML'
            responses:
                200:
                    description: Validation status of provided document.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    valid:
                                        type: boolean
                400:
                    description: Bad Request
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'
                            examples:
                                wrongType:
                                    value:
                                        error: 'Body must be an application/xml string'
                                noBodyError:
                                    value:
                                        error: 'No Body'
                401:
                    $ref: '#/components/responses/UnauthorizedError'
                500:
                    description: Unexpected server error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Error'

components:
    requestBodies:
        IATIXML:
            content:
                text/plain:
                    schema:
                        type: string
                    examples:
                        iatiActivity:
                            summary: A iati-activities document
                            externalValue: 'https://raw.githubusercontent.com/IATI/IATI-Extra-Documentation/version-2.03/en/activity-standard/activity-standard-example-annotated.xml'
                            value: |
                                <?xml version='1.0' encoding='UTF-8'?>
                                <!--This is example XML for the IATI activity standard.  No reference to actual data, real organisations or development cooperation models is intended.-->

                                <!--iati-activities starts-->
                                <iati-activities generated-datetime="2014-09-10T07:15:37Z" version="2.03" linked-data-default="http://data.example.org/">

                                <!--iati-activity starts-->
                                <iati-activity xml:lang="en" default-currency="USD" last-updated-datetime="2014-09-10T07:15:37Z" humanitarian="1" linked-data-uri="http://data.example.org/123456789" hierarchy="1" budget-not-provided="1">

                                <!--iati-identifier starts-->
                                <iati-identifier>AA-AAA-123456789-ABC123</iati-identifier>
                                <!--iati-identifier ends-->

                                <!--reporting-org starts-->
                                <reporting-org ref="AA-AAA-123456789" type="40" secondary-reporter="0">
                                <narrative>Organisation name</narrative>
                                <narrative xml:lang="fr">Nom de l'organisme</narrative>
                                </reporting-org>
                                <!--reporting-org ends-->

                                <!--title starts-->
                                <title>
                                <narrative>Activity title</narrative>
                                <narrative xml:lang="fr">Titre de l'activité</narrative>
                                <narrative xml:lang="es">Título de la actividad</narrative>
                                </title>
                                <!--title ends-->

                                <!--description starts-->
                                <description type="1">
                                <narrative>General activity description text.  Long description of the activity with no particular structure.</narrative>
                                <narrative xml:lang="fr">Activité générale du texte de description. Longue description de l'activité sans structure particulière.</narrative>
                                </description>
                                <description type="2">
                                <narrative>Objectives for the activity, for example from a logical framework.</narrative>
                                <narrative xml:lang="fr">Objectifs de l'activité, par exemple à partir d'un cadre logique.</narrative>
                                </description>
                                <description type="3">
                                <narrative>Statement of groups targeted to benefit from the activity.</narrative>
                                <narrative xml:lang="fr">Déclaration de groupes ciblés pour bénéficier de l'activité.</narrative>
                                </description>
                                <!--description ends-->

                                <!--participating-org starts-->
                                <participating-org ref="BB-BBB-123456789" role="1" type="40" activity-id="BB-BBB-123456789-1234">
                                <narrative>Name of Agency B</narrative>
                                </participating-org>
                                <participating-org ref="CC-CCC-123456789" role="2" type="10" activity-id="CC-CCC-123456789-1234">
                                <narrative>Name of Agency C</narrative>
                                </participating-org>
                                <participating-org ref="AA-AAA-123456789" role="3" type="21" activity-id="AA-AAA-123456789-1234" crs-channel-code="000000">
                                <narrative>Name of Agency A</narrative>
                                <narrative xml:lang="fr">Nom de l'agence A</narrative>
                                </participating-org>
                                <!--participating-org ends-->

                                <!--other-identifier starts-->
                                <other-identifier ref="ABC123-XYZ" type="A1">
                                <owner-org ref="AA-AAA-123456789">
                                    <narrative>Organisation name</narrative>
                                </owner-org>
                                </other-identifier>
                                <!--other-identifier ends-->

                                <!--activity-status starts-->
                                <activity-status code="2" />
                                <!--activity-status ends-->

                                <!--activity-date starts-->
                                <activity-date iso-date="2012-04-15" type="1">
                                <narrative>Planned start date of the activity</narrative>
                                <narrative xml:lang="fr">Date prévue de début de l'activité</narrative>
                                </activity-date>
                                <activity-date iso-date="2012-04-28" type="2" />
                                <activity-date iso-date="2015-12-31" type="3" />
                                <!--activity-date ends-->

                                <!--contact-info starts-->
                                <contact-info type="1">
                                <organisation>
                                    <narrative>Agency A</narrative>
                                </organisation>
                                <department>
                                    <narrative>Department B</narrative>
                                </department>
                                <person-name>
                                    <narrative>A. Example</narrative>
                                </person-name>
                                <job-title>
                                    <narrative>Transparency Lead</narrative>
                                </job-title>
                                <telephone>0044111222333444</telephone>
                                <email>transparency@example.org</email>
                                <website>http://www.example.org</website>
                                <mailing-address>
                                    <narrative>Transparency House, The Street, Town, City, Postcode</narrative>
                                </mailing-address>
                                </contact-info>
                                <!--contact-info ends-->

                                <!--activity-scope starts-->
                                <activity-scope code="3" />
                                <!--activity-scope ends-->

                                <!--recipient-country starts-->
                                <recipient-country code="AF" percentage="25" />
                                <recipient-country code="AG" percentage="25" />
                                <!--recipient-country ends-->

                                <!--recipient-region starts-->
                                <recipient-region code="489" vocabulary="1" percentage="25" />
                                <recipient-region code="A1" vocabulary="99" vocabulary-uri="http://example.com/vocab.html" percentage="25" />
                                <!--recipient-region ends-->

                                <!--location-single starts-->
                                <location ref="AF-KAN">
                                <location-reach code="1" />
                                <location-id vocabulary="G1" code="1453782" />
                                <name>
                                <narrative>Location name</narrative>
                                </name>
                                <description>
                                <narrative>Location description</narrative>
                                </description>
                                <activity-description>
                                <narrative>A description that qualifies the activity taking place at the location.</narrative>
                                </activity-description>
                                <administrative vocabulary="G1" level="1" code="1453782" />
                                <point srsName="http://www.opengis.net/def/crs/EPSG/0/4326">
                                    <pos>31.616944 65.716944</pos>
                                </point>
                                <exactness code="1"/>
                                <location-class code="2"/>
                                <feature-designation code="ADMF"/>
                                </location>
                                <!--location-single ends-->

                                <!--location-additional starts-->
                                <location ref="KH-PNH">
                                <location-reach code="1" />
                                <location-id vocabulary="G1" code="1821306" />
                                <name>
                                <narrative>Location #2 name</narrative>
                                </name>
                                <description>
                                <narrative>Location #2 description</narrative>
                                </description>
                                <activity-description>
                                <narrative>A description that qualifies the activity taking place at location #2</narrative>
                                </activity-description>
                                <administrative vocabulary="G1" level="1" code="1453782" />
                                <point srsName="http://www.opengis.net/def/crs/EPSG/0/4326">
                                    <pos>11.5500 104.9167</pos>
                                </point>
                                <exactness code="1" />
                                <location-class code="2" />
                                <feature-designation code="ADMF" />
                                </location>
                                <!--location-additional ends-->

                                <!--sector starts-->
                                <sector vocabulary="2" code="111" percentage="50" />
                                <sector vocabulary="2" code="112" percentage="50" />
                                <sector vocabulary="99" vocabulary-uri="http://example.com/vocab.html" code="A1" percentage="100">
                                    <narrative>A description of the sector</narrative>
                                </sector>
                                <!--sector ends-->

                                <!--tag starts-->
                                <tag vocabulary="1" code="1">
                                    <narrative>A description of the tag</narrative>
                                </tag>
                                <tag vocabulary="99" vocabulary-uri="http://example.com/vocab.html" code="T1">
                                    <narrative>A description of the tag</narrative>
                                </tag>
                                <!--tag ends-->

                                <!--country-budget-items starts-->
                                <country-budget-items vocabulary="4">
                                <budget-item code="1844" percentage="50">
                                    <description>
                                    <narrative>Description text</narrative>
                                    </description>
                                </budget-item>
                                <budget-item code="1900" percentage="50">
                                    <description>
                                    <narrative>Description text</narrative>
                                    </description>
                                </budget-item>
                                </country-budget-items>
                                <!--country-budget-items ends-->

                                <!--humanitarian-scope starts-->
                                <humanitarian-scope type="1" vocabulary="1-2" code="EQ-2015-000048-NPL">
                                    <narrative>Nepal Earthquake April 2015</narrative>
                                    <narrative xml:lang="fr"> Népal Earthquake Avril 2015</narrative>
                                </humanitarian-scope>
                                <humanitarian-scope type="1" vocabulary="99" vocabulary-uri="http://example.com/vocab.html" code="A1">
                                <narrative xml:lang="en">Nepal Earthquake April 2015</narrative>
                                </humanitarian-scope>
                                <!--humanitarian-scope ends-->

                                <!--policy-marker starts-->
                                <policy-marker vocabulary="1" code="2" significance="3" />
                                <policy-marker vocabulary="1" code="9" significance="4" />
                                <policy-marker vocabulary="99" vocabulary-uri="http://example.com/vocab.html" code="A1" significance="3" />
                                <!--policy-marker ends-->

                                <!--collaboration-type starts-->
                                <collaboration-type code="1" />
                                <!--collaboration-type ends-->

                                <!--default-flow-type starts-->
                                <default-flow-type code="10" />
                                <!--default-flow-type ends-->

                                <!--default-finance-type starts-->
                                <default-finance-type code="110" />
                                <!--default-finance-type ends-->

                                <!--default-aid-type starts-->
                                <default-aid-type code="A01" vocabulary="1" />
                                <default-aid-type code="1" vocabulary="2" />
                                <!--default-aid-type ends-->

                                <!--default-tied-status starts-->
                                <default-tied-status code="3" />
                                <!--default-tied-status ends-->

                                <!--budget starts-->
                                <budget type="1" status="1">
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="EUR" value-date="2014-01-01">3000</value>
                                </budget>
                                <!--budget ends-->

                                <!--planned-disbursement starts-->
                                <planned-disbursement type="1">
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="EUR" value-date="2014-01-01">3000</value>
                                <provider-org provider-activity-id="BB-BBB-123456789-1234AA" type="10" ref="BB-BBB-123456789">
                                    <narrative>Agency B</narrative>
                                </provider-org>
                                <receiver-org receiver-activity-id="AA-AAA-123456789-1234" type="23" ref="AA-AAA-123456789">
                                    <narrative>Agency A</narrative>
                                </receiver-org>
                                </planned-disbursement>
                                <!--planned-disbursement ends-->

                                <!--planned-disbursement-single-date starts-->
                                <planned-disbursement type="1">
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="EUR" value-date="2014-01-01">3000</value>
                                </planned-disbursement>
                                <!--planned-disbursement ends-->

                                <!--capital-spend starts-->
                                <capital-spend percentage="88.8" />
                                <!--capital-spend ends-->

                                <!--transaction starts-->
                                <transaction ref="1234" humanitarian="1">
                                <transaction-type code="1" />
                                <transaction-date iso-date="2012-01-01" />
                                <value currency="EUR" value-date="2012-01-01">1000</value>
                                <description>
                                    <narrative>Transaction description text</narrative>
                                </description>
                                <provider-org provider-activity-id="BB-BBB-123456789-1234AA" type="10" ref="BB-BBB-123456789">
                                    <narrative>Agency B</narrative>
                                </provider-org>
                                <receiver-org receiver-activity-id="AA-AAA-123456789-1234" type="23" ref="AA-AAA-123456789">
                                    <narrative>Agency A</narrative>
                                </receiver-org>
                                <disbursement-channel code="1" />
                                <sector vocabulary="2" code="111" />
                                <!--Note: only a recipient-region OR a recipient-country is expected-->
                                <recipient-country code="TM" />
                                <recipient-region code="616" vocabulary="1" />
                                <flow-type code="10" />
                                <finance-type code="110" />
                                <aid-type code="A01" vocabulary="1" />
                                <aid-type code="1" vocabulary="2" />
                                <tied-status code="3" />
                                </transaction>
                                <!--transaction ends-->

                                <!--document-link starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/report_en.odt">
                                <title>
                                    <narrative>Project Report 2013</narrative>
                                    <narrative xml:lang="fr">Rapport de projet 2013</narrative>
                                </title>
                                <description>
                                    <narrative> Description of the content of the project report or guidance on where to access the relevant information in this report </narrative>
                                </description>
                                <category code="A01" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                </document-link>
                                <!--document-link ends-->

                                <!--related-activity starts-->
                                <related-activity ref="AA-AAA-123456789-6789" type="1" />
                                <!--related-activity ends-->

                                <!--legacy-data starts-->
                                <legacy-data name="Project Status" value="7" iati-equivalent="activity-status" />
                                <legacy-data name="cost" value="1000" iati-equivalent="transaction" />
                                <!--legacy-data ends-->

                                <!--conditions starts-->
                                <conditions attached="1">
                                <condition type="1">
                                    <narrative>Conditions text</narrative>
                                    <narrative xml:lang="fr">Conditions texte</narrative>
                                </condition>
                                </conditions>
                                <!--conditions ends-->

                                <!--result starts-->
                                <result type="1" aggregation-status="1">
                                <title>
                                    <narrative>Result title</narrative>
                                </title>
                                <description>
                                    <narrative>Result description text</narrative>
                                </description>
                                <!--result-document-link example starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/result_en.odt">
                                    <title>
                                    <narrative>Results Report 2013</narrative>
                                    </title>
                                    <description>
                                    <narrative>Report of results</narrative>
                                    </description>
                                    <category code="A01" />
                                    <language code="en" />
                                    <document-date iso-date="2014-02-05" />
                                </document-link>
                                <!--result-document-link example ends-->
                                <!--result-reference starts-->
                                <reference vocabulary="99" code="B1" vocabulary-uri="http://example.com/indicators.html" />
                                <!--result-reference ends-->
                                <!--result-indicator starts-->
                                <indicator measure="1" ascending="1" aggregation-status="1">
                                    <title>
                                    <narrative>Indicator title</narrative>
                                    </title>
                                    <description>
                                    <narrative>Indicator description text</narrative>
                                    </description>
                                    <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/result_indicator_en.odt">
                                    <title>
                                    <narrative>Results Indicator Report 2013</narrative>
                                    </title>
                                    <description>
                                        <narrative>Report of results indicator</narrative>
                                    </description>
                                    <category code="A01" />
                                    <language code="en" />
                                    <document-date iso-date="2014-02-05" />
                                    </document-link>
                                    <reference vocabulary="1" code="3429" />
                                    <reference vocabulary="7" code="861" />
                                    <reference vocabulary="99" code="B1" indicator-uri="http://example.com/indicators.html" />
                                <!--result-baseline starts-->
                                    <baseline year="2012" iso-date="2012-01-01" value="10">
                                    <location ref="AF-KAN" />
                                    <location ref="KH-PNH" />
                                    <dimension name="sex" value="female" />
                                    <dimension name="age" value="adult" />
                                    <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/result_baseline_en.odt">
                                    <title>
                                        <narrative>Results Baseline Report 2013</narrative>
                                    </title>
                                    <description>
                                        <narrative>Report of results baseline</narrative>
                                    </description>
                                    <category code="A01" />
                                    <language code="en" />
                                    <document-date iso-date="2014-02-05" />
                                    </document-link>
                                    <comment>
                                    <narrative>Baseline comment text</narrative>
                                    </comment>
                                    </baseline>
                                    <!--result-baseline ends-->
                                    <!--result-period starts-->
                                    <period>
                                    <period-start iso-date="2013-01-01" />
                                    <period-end iso-date="2013-03-31" />
                                    <target value="10">
                                    <location ref="AF-KAN" />
                                    <location ref="KH-PNH" />
                                    <dimension name="sex" value="female" />
                                    <dimension name="age" value="adult" />
                                    <comment>
                                        <narrative>Target comment text</narrative>
                                    </comment>
                                    <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/result_period_target_en.odt">
                                        <title>
                                        <narrative>Results Period Target Report 2013</narrative>
                                        </title>
                                        <description>
                                        <narrative>Report of results period target</narrative>
                                        </description>
                                        <category code="A01" />
                                        <language code="en" />
                                        <document-date iso-date="2014-02-05" />
                                    </document-link>
                                    </target>
                                    <actual value="11">
                                    <location ref="AF-KAN" />
                                    <location ref="KH-PNH" />
                                    <dimension name="sex" value="female" />
                                    <dimension name="age" value="adult" />
                                    <comment>
                                        <narrative>Actual comment text</narrative>
                                    </comment>
                                    <document-link format="application/vnd.oasis.opendocument.text" url="http:www.example.org/docs/result_period_actual_en.odt">
                                        <title>
                                        <narrative>Results Period Actual Report 2013</narrative>
                                        </title>
                                        <description>
                                        <narrative>Report of results period actual</narrative>
                                        </description>
                                        <category code="A01" />
                                        <language code="en" />
                                        <document-date iso-date="2014-02-05" />
                                    </document-link>
                                    </actual>
                                    </period>
                                    <!--result-period ends-->
                                </indicator>
                                <!--result-indicator ends-->
                                </result>
                                <!--result ends-->

                                <!--crs-add starts-->
                                <crs-add>
                                <other-flags code="1" significance="1" />
                                <loan-terms rate-1="4" rate-2="3">
                                    <repayment-type code="1" />
                                    <repayment-plan code="4" />
                                    <commitment-date iso-date="2013-09-01"/>
                                    <repayment-first-date iso-date="2014-01-01" />
                                    <repayment-final-date iso-date="2020-12-31" />
                                </loan-terms>
                                <loan-status year="2014" currency="GBP" value-date="2013-05-24">
                                    <interest-received>200000</interest-received>
                                    <principal-outstanding>1500000</principal-outstanding>
                                    <principal-arrears>0</principal-arrears>
                                    <interest-arrears>0</interest-arrears>
                                </loan-status>
                                <channel-code>21039</channel-code>
                                </crs-add>
                                <!--crs-add ends-->

                                <!--fss starts-->
                                <fss extraction-date="2014-05-06" priority="1" phaseout-year="2016">
                                <forecast year="2014" value-date="2013-07-03" currency="GBP">10000</forecast>
                                </fss>
                                <!--fss ends-->

                                </iati-activity>
                                <!--iati-activity ends-->

                                </iati-activities>
                                <!--iati-activities ends-->
                        iatiOrganisation:
                            summary: A iati-organisation document
                            externalValue: 'https://raw.githubusercontent.com/IATI/IATI-Extra-Documentation/version-2.03/en/organisation-standard/organisation-standard-example-annotated.xml'
                            value: |
                                <?xml version="1.0" encoding="UTF-8"?>
                                <!--This is example XML for the IATI organisation standard.  No reference to actual data or real organisations is intended-->

                                <!--iati-organisations starts-->
                                <iati-organisations generated-datetime="2014-09-10T07:15:37Z" version="2.03">

                                <!--iati-organisation starts-->
                                <iati-organisation default-currency="EUR" last-updated-datetime="2014-09-10T07:15:37Z" xml:lang="en">

                                <!--organisation-identifier starts-->
                                <organisation-identifier>AA-AAA-123456789</organisation-identifier>
                                <!--organisation-identifier ends-->

                                <!--name starts-->
                                <name>
                                <narrative>Organisation name</narrative>
                                <narrative xml:lang="fr">Nom de l'organisme</narrative>
                                </name>
                                <!--name ends-->

                                <!--reporting-org starts-->
                                <reporting-org ref="AA-AAA-123456789" type="40" secondary-reporter="0">
                                <narrative>Organisation name</narrative>
                                <narrative xml:lang="fr">Nom de l'organisme</narrative>
                                </reporting-org>
                                <!--reporting-org ends-->

                                <!--total-budget starts-->
                                <total-budget status="2">
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="USD" value-date="2014-01-01">250000000</value>
                                <budget-line ref="1234">
                                    <value currency="USD" value-date="2014-01-01">200000000</value>
                                    <narrative>Budget Line</narrative>
                                </budget-line>
                                </total-budget>
                                <!--total-budget ends-->

                                <!--recipient-org-budget starts-->
                                <recipient-org-budget status="2">
                                <recipient-org ref="AA-ABC-1234567">
                                    <narrative>Org Name</narrative>
                                </recipient-org>
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="USD" value-date="2014-01-01">2500000</value>
                                <budget-line ref="1234">
                                    <value currency="USD" value-date="2014-01-01">2000000</value>
                                    <narrative>Budget Line</narrative>
                                </budget-line>
                                </recipient-org-budget>
                                <!--recipient-org-budget ends-->

                                <!--recipient-region-budget starts-->
                                <recipient-region-budget status="2">
                                <recipient-region vocabulary="99" vocabulary-uri="http://example.com/vocab.html" code="A1" />
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="USD" value-date="2014-01-01">25000000</value>
                                <budget-line ref="1234">
                                    <value currency="USD" value-date="2014-01-01">2000000</value>
                                    <narrative xml:lang="en">Budget Line</narrative>
                                </budget-line>
                                </recipient-region-budget>
                                <!--recipient-region-budget ends-->

                                <!--recipient-country-budget starts-->
                                <recipient-country-budget status="2">
                                <recipient-country code="AF" />
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="USD" value-date="2014-01-01">25000000</value>
                                <budget-line ref="1234">
                                    <value currency="USD" value-date="2014-01-01">2000000</value>
                                    <narrative>Budget Line</narrative>
                                </budget-line>
                                </recipient-country-budget>
                                <!--recipient-country-budget ends-->

                                <!--total-expenditure starts-->
                                <total-expenditure>
                                <period-start iso-date="2014-01-01" />
                                <period-end iso-date="2014-12-31" />
                                <value currency="USD" value-date="2014-01-01">250000000</value>
                                <expense-line ref="1234">
                                    <value currency="USD" value-date="2014-01-01">200000000</value>
                                    <narrative xml:lang="en">Expense Line</narrative>
                                </expense-line>
                                </total-expenditure>
                                <!--total-expenditure ends-->

                                <!--document-link starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_en.odt">
                                <title>
                                <narrative>Annual Report 2013</narrative>
                                </title>
                                <description>
                                    <narrative>Description of the annual report.</narrative>
                                </description>
                                <category code="B01" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                </document-link>
                                <!--document-link ends-->

                                <!--document-link-title starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_en.odt">
                                <title>
                                    <narrative>Annual Report 2013</narrative>
                                    <narrative xml:lang="fr">Rapport annuel 2013</narrative>
                                </title>
                                <description>
                                    <narrative>Description of the annual report.</narrative>
                                </description>
                                <category code="B01" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                </document-link>
                                <!--document-link-title ends-->

                                <!--document-link-description starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_en.odt">
                                <title>
                                    <narrative>Annual Report 2013</narrative>
                                </title>
                                <description>
                                    <narrative>Description of the annual report.</narrative>
                                    <narrative xml:lang="fr">Description du rapport annuel.</narrative>
                                </description>
                                <category code="B01" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                </document-link>
                                <!--document-link-description ends-->

                                <!--document-link-lang starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_fr.odt">
                                <title>
                                    <narrative>Annual Report 2013</narrative>
                                    <narrative xml:lang="fr">Rapport annuel 2013</narrative>
                                </title>
                                <category code="B01" />
                                <language code="fr" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                </document-link>
                                <!--document-link-lang ends-->

                                <!--multi-cat-document-link starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_en.odt">
                                <title>
                                    <narrative>Annual Report 2013</narrative>
                                    <narrative xml:lang="fr">Rapport annuel 2013</narrative>
                                </title>
                                <description>
                                    <narrative>Description of the document</narrative>
                                </description>
                                <category code="B01" />
                                <category code="B02" />
                                <category code="B03" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                </document-link>
                                <!--multi-cat-document-link ends-->

                                <!--multi-country-document-link starts-->
                                <document-link format="application/vnd.oasis.opendocument.text" url="http://www.example.org/docs/report_en.odt">
                                <title>
                                    <narrative>Country Report 2013</narrative>
                                    <narrative xml:lang="fr">Rapport Pays 2013</narrative>
                                </title>
                                <description>
                                    <narrative>Description of the document</narrative>
                                </description>
                                <category code="B01" />
                                <language code="en" />
                                <document-date iso-date="2014-02-05" />
                                <recipient-country code="AF">
                                    <narrative>Afghanistan</narrative>
                                </recipient-country>
                                <recipient-country code="AX" />
                                <recipient-country code="AL" />
                                </document-link>
                                <!--multi-country-document-link ends-->

                                </iati-organisation>
                                <!--iati-organisation ends-->

                                </iati-organisations>
                                <!--iati-organisations ends-->
    responses:
        UnauthorizedError:
            description: API key is missing or invalid
    schemas:
        AppInfo:
            description: Basic info about the application
            type: string
            example: |
                <Public/Private> API.
                Version <0.0.0>
                <greeting>, <Name>. This HTTP triggered function executed successfully.
        Error:
            type: object
            required:
                - error
            properties:
                error:
                    description: A human readable error message
                    type: string
        ValidationReportAdHocValidate:
            required:
                - valid
                - fileType
                - iatiVersion
                - rulesetCommitSha
                - codelistCommitSha
                - orgIdPrefixFileName
                - apiVersion
                - summary
                - errors
            type: object
            properties:
                valid:
                    type: boolean
                    description: Files with no critical severity errors are considered valid
                fileType:
                    enum:
                        - iati-activities
                        - iati-organisations
                    type: string
                    description: The type of IATI file
                iatiVersion:
                    type: string
                    description: Version of the IATI Standard of the file
                rulesetCommitSha:
                    type: string
                    description: git commit sha of the ruleset used to create the validation report
                codelistCommitSha:
                    type: string
                    description: git commit sha of the codelist rules used to create the validation report
                orgIdPrefixFileName:
                    type: string
                    description: file name of org id prefixes from https://org-id.guide/download.json
                apiVersion:
                    type: string
                    description: version of the validator api
                activities:
                    type: array
                    description: Present if query parameter `meta=true` and the document is an iati-activities document.
                    items:
                        required:
                            - identifier
                            - valid
                            - index
                        type: object
                        properties:
                            identifier:
                                type: string
                                description: The activity's iati-identifier for iati-activities files
                            valid:
                                type: boolean
                                description: If the activity is schema valid or not.
                            index:
                                type: integer
                                description: Index position in the document of the activity.
                organisations:
                    type: array
                    description: Present if query parameter `meta=true` and the document is an iati-organisations document.
                    items:
                        required:
                            - identifier
                            - valid
                            - index
                        type: object
                        properties:
                            identifier:
                                type: string
                                description: The organisation-identifier for iati-organisations files.
                            valid:
                                type: boolean
                                description: If the organisation is schema valid or not.
                            index:
                                type: integer
                                description: Index position in the document of the activity.
                summary:
                    required:
                        - critical
                        - error
                        - warning
                    type: object
                    properties:
                        critical:
                            type: integer
                            description: Number of critical level validation errors with the file
                        error:
                            type: integer
                            description: Number of error level validation errors with the file
                        warning:
                            type: integer
                            description: Number of warning level validation errors with the file
                errors:
                    type: array
                    items:
                        required:
                            - errors
                            - identifier
                            - title
                        type: object
                        properties:
                            errors:
                                type: array
                                items:
                                    required:
                                        - errors
                                        - category
                                    type: object
                                    properties:
                                        errors:
                                            type: array
                                            items:
                                                required:
                                                    - id
                                                    - severity
                                                    - message
                                                    - context
                                                type: object
                                                properties:
                                                    id:
                                                        type: string
                                                        description: The unique identifier of the error
                                                    severity:
                                                        enum:
                                                            - critical
                                                            - danger
                                                            - warning
                                                        type: string
                                                        description: The severity level of the error
                                                    message:
                                                        type: string
                                                        description: The informational message about the validation error
                                                    codelist:
                                                        type: string
                                                        description: The codelist that is being validated against (if applicable)
                                                    context:
                                                        type: array
                                                        items:
                                                            required:
                                                                - text
                                                            type: object
                                                            properties:
                                                                text:
                                                                    type: string
                                                                    description: The context of the error
                                        category:
                                            enum:
                                                - identifiers
                                                - organisation
                                                - information
                                                - participating
                                                - geo
                                                - classifications
                                                - financial
                                                - documents
                                                - relations
                                                - performance
                                            type: string
                                            description: The category of the validation error
                            identifier:
                                type: string
                                description: "The activity's iati-identifier for iati-activities files, organisation-identifier for iati-organisations file, or 'file' for file level errors"
                            title:
                                type: string
                                description: "The activity's title for iati-activities files, the organisation name for iati-organisations files, or 'File level errors' for file level errors"
                    description: 'array of errors, if empty the file has no errors'
                    example:
                        valid: false
                        fileType: string
                        iatiVersion: string
                        rulesetCommitSha: string
                        codelistCommitSha: string
                        orgIdPrefixFileName: string
                        apiVersion: string
                        summary:
                            critical: 0
                            error: 0
                            warning: 0
                        errors:
                            - errors:
                                  - errors:
                                        - id: string
                                          severity: string
                                          message: string
                                          codelist: string
                                          context:
                                              - text: string
                                    category: string
                              identifier: string
                              title: string
